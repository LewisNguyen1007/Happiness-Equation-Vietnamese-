<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√¥ ph·ªèng Ph∆∞∆°ng Tr√¨nh H·∫°nh Ph√∫c T·ª©c Th·ªùi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Calm Academia -->
    <!-- Application Structure Plan: The application is designed as an interactive dashboard to transform the dense academic report into an exploratory learning tool. The structure is thematic, not linear, guiding the user from foundational concepts to a hands-on simulation. It consists of four main sections: 1) An introduction to core concepts using clear, digestible cards. 2) An interactive simulator for a single emotional pulse, allowing users to manipulate parameters with sliders and see the immediate impact on a chart. This makes the abstract equation tangible. 3) A more advanced simulator for the total emotional experience, where users can add multiple events and compare the report's non-linear "divisive normalization" model against a simple linear sum, visually demonstrating the key theoretical contribution (emotional saturation). 4) A summary of hypotheses and applications. This structure was chosen because it prioritizes intuitive understanding and direct engagement with the model's dynamics over passively reading the original report's text. -->
    <!-- Visualization & Content Choices: Report Info: Single pulse equation -> Goal: Understand parameter effects -> Viz: Interactive line chart (Chart.js) -> Interaction: Sliders for IAD, AG, SP, RM update the chart in real-time. Justification: Direct manipulation provides the clearest intuition for how each cognitive mechanism shapes an emotional response. Report Info: Total experience equation with divisive normalization -> Goal: Compare linear vs. non-linear summation -> Viz: Dual-series line chart (Chart.js) -> Interaction: Buttons to add events, toggle between models, sliders for normalization factors. Justification: Visual comparison is the most effective way to demonstrate the concept of emotional saturation and the novelty of the proposed model. Report Info: Core concepts & hypotheses -> Goal: Inform -> Presentation: Styled text cards (HTML/Tailwind). Justification: Provides clear, static context for the interactive elements. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f7f4;
            color: #334155;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .slider-track {
            background: #e2e8f0;
        }
        .slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #0d9488;
            cursor: pointer;
            border-radius: 50%;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #0d9488;
            cursor: pointer;
            border-radius: 50%;
            margin-top: -6px;
        }
        input[type=range]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #0d9488;
            cursor: pointer;
            border-radius: 50%;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl font-bold text-teal-700">Ph∆∞∆°ng Tr√¨nh H·∫°nh Ph√∫c T·ª©c Th·ªùi</h1>
                <div class="hidden md:flex space-x-6 text-sm font-medium">
                    <a href="#overview" class="text-slate-600 hover:text-teal-600 transition">T·ªïng quan</a>
                    <a href="#single-pulse" class="text-slate-600 hover:text-teal-600 transition">M√¥ ph·ªèng Xung ƒê∆°n l·∫ª</a>
                    <a href="#total-experience" class="text-slate-600 hover:text-teal-600 transition">M√¥ ph·ªèng Tr·∫£i nghi·ªám</a>
                    <a href="#theory" class="text-slate-600 hover:text-teal-600 transition">L√Ω thuy·∫øt & ·ª®ng d·ª•ng</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 lg:px-8 py-8 md:py-12">

        <section id="overview" class="mb-16 scroll-mt-20">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-2">Kh√°m ph√° ƒê·ªông h·ªçc C·∫£m x√∫c</h2>
                <p class="text-lg text-slate-500 max-w-3xl mx-auto">M√¥ h√¨nh n√†y cung c·∫•p m·ªôt khung t√≠nh to√°n ƒë·ªÉ hi·ªÉu c√°ch c√°c qu√° tr√¨nh nh·∫≠n th·ª©c t·∫°o ra v√† ƒëi·ªÅu ch·ªânh d√≤ng ch·∫£y c·∫£m x√∫c t·ª©c th·ªùi c·ªßa ch√∫ng ta.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200/50">
                    <h3 class="font-bold text-lg text-teal-700 mb-2">ƒê·ªô Ch√™nh Th·∫©m ƒë·ªãnh Ban ƒë·∫ßu (IAD‚ÇÄ)</h3>
                    <p class="text-sm text-slate-600">Ngu·ªìn nƒÉng l∆∞·ª£ng kh·ªüi ph√°t c·ªßa m·ªôt xung c·∫£m x√∫c. ƒê√¢y l√† t√≠n hi·ªáu sai s·ªë gi·ªØa "c√°i ƒëang l√†" v√† "c√°i n√™n l√†". N√≥ x√°c ƒë·ªãnh c·∫£m x√∫c l√† t√≠ch c·ª±c hay ti√™u c·ª±c v√† c∆∞·ªùng ƒë·ªô ban ƒë·∫ßu.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200/50">
                    <h3 class="font-bold text-lg text-teal-700 mb-2">S·ª± Thu·∫ßn th·ª•c Samatha (SP)</h3>
                    <p class="text-sm text-slate-600">NƒÉng l·ª±c ƒëi·ªÅu h√≤a c·∫£m x√∫c th√¥ng qua s·ª± ƒë·ªãnh t√¢m v√† ch√∫ √Ω. SP ho·∫°t ƒë·ªông nh∆∞ m·ªôt c∆° ch·∫ø "n√©n bi√™n ƒë·ªô", l√†m gi·∫£m c∆∞·ªùng ƒë·ªô c·ªßa ph·∫£n ·ª©ng c·∫£m x√∫c, gi√∫p h·ªá th·ªëng kh√¥ng b·ªã qu√° t·∫£i.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200/50">
                    <h3 class="font-bold text-lg text-teal-700 mb-2">S·ª± Tinh th√¥ng T√°i th·∫©m ƒë·ªãnh (RM)</h3>
                    <p class="text-sm text-slate-600">NƒÉng l·ª±c ƒëi·ªÅu ch·ªânh c·∫£m x√∫c b·∫±ng c√°ch di·ªÖn gi·∫£i l·∫°i √Ω nghƒ©a c·ªßa tr·∫£i nghi·ªám. RM "ƒëi·ªÅu bi·∫øn h√¨nh th√°i th·ªùi gian", c√≥ th·ªÉ k√©o d√†i c·∫£m x√∫c t√≠ch c·ª±c v√† r√∫t ng·∫Øn c·∫£m x√∫c ti√™u c·ª±c.</p>
                </div>
            </div>
        </section>

        <section id="single-pulse" class="mb-16 scroll-mt-20">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-2">M√¥ ph·ªèng m·ªôt Xung C·∫£m x√∫c ƒê∆°n l·∫ª</h2>
                <p class="text-lg text-slate-500 max-w-3xl mx-auto">ƒêi·ªÅu ch·ªânh c√°c tham s·ªë nh·∫≠n th·ª©c b√™n d∆∞·ªõi ƒë·ªÉ xem ch√∫ng ƒë·ªãnh h√¨nh m·ªôt xung c·∫£m x√∫c ƒë∆°n l·∫ª nh∆∞ th·∫ø n√†o theo th·ªùi gian. T∆∞∆°ng t√°c v·ªõi bi·ªÉu ƒë·ªì ƒë·ªÉ kh√°m ph√° ƒë·ªông h·ªçc c·ªßa n√≥.</p>
            </div>
            
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-slate-200/50">
                <div class="grid lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1 space-y-6">
                        <div>
                            <label for="iad-slider" class="block text-sm font-medium text-slate-700">ƒê·ªô Ch√™nh Th·∫©m ƒë·ªãnh (IAD‚ÇÄ): <span id="iad-value" class="font-bold text-teal-700"></span></label>
                            <input id="iad-slider" type="range" min="-10" max="10" value="-4" step="1" class="w-full h-2 rounded-lg appearance-none cursor-pointer slider-track">
                            <p class="text-xs text-slate-500 mt-1">Gi√° tr·ªã √¢m cho c·∫£m x√∫c ti√™u c·ª±c, d∆∞∆°ng cho t√≠ch c·ª±c.</p>
                        </div>
                        <div>
                            <label for="ag-slider" class="block text-sm font-medium text-slate-700">Khu·∫øch ƒë·∫°i C·∫£m x√∫c (AG): <span id="ag-value" class="font-bold text-teal-700"></span></label>
                            <input id="ag-slider" type="range" min="0.5" max="10" value="5" step="0.1" class="w-full h-2 rounded-lg appearance-none cursor-pointer slider-track">
                             <p class="text-xs text-slate-500 mt-1">ƒê·ªô nh·∫°y c·∫£m x√∫c b·∫©m sinh c·ªßa c√° nh√¢n.</p>
                        </div>
                        <div>
                            <label for="sp-slider" class="block text-sm font-medium text-slate-700">Thu·∫ßn th·ª•c Samatha (SP): <span id="sp-value" class="font-bold text-teal-700"></span></label>
                            <input id="sp-slider" type="range" min="0" max="10" value="1" step="0.5" class="w-full h-2 rounded-lg appearance-none cursor-pointer slider-track">
                             <p class="text-xs text-slate-500 mt-1">NƒÉng l·ª±c ƒë·ªãnh t√¢m. SP c√†ng cao, bi√™n ƒë·ªô c·∫£m x√∫c c√†ng b·ªã n√©n.</p>
                        </div>
                        <div>
                            <label for="rm-slider" class="block text-sm font-medium text-slate-700">Tinh th√¥ng T√°i th·∫©m ƒë·ªãnh (RM): <span id="rm-value" class="font-bold text-teal-700"></span></label>
                            <input id="rm-slider" type="range" min="0.5" max="5.5" value="1" step="0.5" class="w-full h-2 rounded-lg appearance-none cursor-pointer slider-track">
                             <p class="text-xs text-slate-500 mt-1">K√©o d√†i c·∫£m x√∫c t√≠ch c·ª±c v√† r√∫t ng·∫Øn c·∫£m x√∫c ti√™u c·ª±c.</p>
                        </div>
                    </div>
                    <div class="lg:col-span-2">
                         <div class="chart-container">
                            <canvas id="singlePulseChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="total-experience" class="mb-16 scroll-mt-20">
             <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-2">M√¥ ph·ªèng Tr·∫£i nghi·ªám: T√¢m tr√≠ R√®n luy·ªán vs. Ph·∫£n ·ª©ng</h2>
                <p class="text-lg text-slate-500 max-w-3xl mx-auto">Th√™m c√°c s·ª± ki·ªán ƒë·ªÉ so s√°nh c√°ch m·ªôt t√¢m tr√≠ ƒë∆∞·ª£c r√®n luy·ªán v√† m·ªôt t√¢m tr√≠ ph·∫£n ·ª©ng x·ª≠ l√Ω c√πng m·ªôt chu·ªói tr·∫£i nghi·ªám, nay c√≥ th√™m c∆° ch·∫ø ·ª©c ch·∫ø ch√©o.</p>
            </div>

            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-slate-200/50">
                <div class="grid lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1 space-y-4">
                        <div class="space-x-2">
                           <button id="add-positive-event" class="bg-teal-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-teal-700 transition">Th√™m S·ª± ki·ªán T√≠ch c·ª±c (+)</button>
                           <button id="add-negative-event" class="bg-rose-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-rose-700 transition">Th√™m S·ª± ki·ªán Ti√™u c·ª±c (-)</button>
                        </div>
                         <p class="text-xs text-slate-500">Th√™m c√°c s·ª± ki·ªán c·∫£m x√∫c t·∫°i c√°c th·ªùi ƒëi·ªÉm ng·∫´u nhi√™n.</p>
                        
                        <div class="pt-4">
                            <label for="gamma-plus-slider" class="block text-sm font-medium text-slate-700">H·ªá s·ªë T·ª± chu·∫©n h√≥a Œ≥+: <span id="gamma-plus-value" class="font-bold text-teal-700"></span></label>
                            <input id="gamma-plus-slider" type="range" min="0" max="0.5" value="0.1" step="0.01" class="w-full h-2 rounded-lg appearance-none cursor-pointer slider-track">
                            <p class="text-xs text-slate-500 mt-1">M·ª©c ƒë·ªô b√£o h√≤a c·ªßa k√™nh c·∫£m x√∫c t√≠ch c·ª±c.</p>
                        </div>
                        <div>
                            <label for="gamma-minus-slider" class="block text-sm font-medium text-slate-700">H·ªá s·ªë T·ª± chu·∫©n h√≥a Œ≥-: <span id="gamma-minus-value" class="font-bold text-teal-700"></span></label>
                            <input id="gamma-minus-slider" type="range" min="0" max="0.5" value="0.1" step="0.01" class="w-full h-2 rounded-lg appearance-none cursor-pointer slider-track">
                             <p class="text-xs text-slate-500 mt-1">M·ª©c ƒë·ªô b√£o h√≤a c·ªßa k√™nh c·∫£m x√∫c ti√™u c·ª±c.</p>
                        </div>
                        <div>
                            <label for="kappa-slider" class="block text-sm font-medium text-slate-700">H·ªá s·ªë ·ª®c ch·∫ø Ch√©o Œ∫: <span id="kappa-value" class="font-bold text-teal-700"></span></label>
                            <input id="kappa-slider" type="range" min="0" max="1" value="0" step="0.2" class="w-full h-2 rounded-lg appearance-none cursor-pointer slider-track">
                            <p class="text-xs text-slate-500 mt-1">M·ª©c ƒë·ªô "vui k√¨m bu·ªìn" v√† ng∆∞·ª£c l·∫°i.</p>
                        </div>
                        <div class="flex items-center justify-between pt-2">
                             <button id="reset-events" class="bg-slate-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-slate-600 transition">Thi·∫øt l·∫≠p l·∫°i</button>
                        </div>
                        <div class="mt-2 p-3 bg-slate-100 rounded-lg text-sm">
                            <p class="text-slate-600 text-center">So s√°nh <strong class="text-teal-600">T√¢m tr√≠ R√®n luy·ªán</strong> v·ªõi <strong class="text-rose-600">T√¢m tr√≠ Ph·∫£n ·ª©ng</strong>.</p>
                            <div class="text-xs text-slate-500 mt-2 pt-2 border-t border-slate-200">
                                <p class="font-semibold text-center">Gi√° tr·ªã c·ªë ƒë·ªãnh c·ªßa T√¢m tr√≠ Ph·∫£n ·ª©ng:</p>
                                <p class="text-center">AG = 1.0, SP = 0, RM = 0.5</p>
                            </div>
                        </div>
                    </div>
                    <div class="lg:col-span-2">
                        <div class="chart-container">
                            <canvas id="totalExperienceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="theory" class="scroll-mt-20">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-2">N·ªÅn t·∫£ng L√Ω thuy·∫øt & ·ª®ng d·ª•ng</h2>
                <p class="text-lg text-slate-500 max-w-3xl mx-auto">M√¥ h√¨nh n√†y kh√¥ng ch·ªâ l√† l√Ω thuy·∫øt; n√≥ ƒë∆∞·ª£c neo gi·ªØ trong c√°c nguy√™n l√Ω nh·∫≠n th·ª©c v√† m·ªü ra nh·ªØng h∆∞·ªõng ƒëi m·ªõi trong vi·ªác hi·ªÉu bi·∫øt v·ªÅ s·ª©c kh·ªèe t√¢m th·∫ßn.</p>
            </div>
            <div class="space-y-6 max-w-4xl mx-auto">
                 <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200/50">
                    <h3 class="font-semibold text-slate-800 mb-3">üß¨ N·ªÅn t·∫£ng L√Ω thuy·∫øt</h3>
                    <p class="text-sm text-slate-600 mb-4">Ph∆∞∆°ng tr√¨nh n√†y ƒë∆∞·ª£c suy ra t·ª´ m·ªôt m√¥ h√¨nh chi ti·∫øt v·ªÅ c√°ch t√¢m tr√≠ x·ª≠ l√Ω th√¥ng tin v√† c√°c nguy√™n l√Ω sinh l√Ω c∆° b·∫£n.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 pt-4 border-t border-slate-200/80">
                        <div>
                            <h4 class="font-medium text-slate-700 mb-2 text-base">Ba L·ª±c L∆∞·ª£ng Sinh L√Ω</h4>
                            <ul class="space-y-3 text-sm text-slate-600">
                                <li class="flex items-start">
                                    <span class="text-xl text-green-500 mr-3 mt-0.5">&#x2197;</span>
                                    <div><strong class="font-semibold">Khu·∫øch ƒë·∫°i S·ªõm:</strong> Ph·∫£n ·ª©ng ƒë·ªãnh h∆∞·ªõng, h·ª©ng kh·ªüi ban ƒë·∫ßu khi c√≥ m·ªôt k√≠ch th√≠ch m·ªõi.</div>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-xl text-yellow-500 mr-3 mt-0.5">&#x2198;</span>
                                    <div><strong class="font-semibold">B√£o h√≤a & Th√≠ch nghi:</strong> C∆° ch·∫ø "phanh" gi√∫p h·ªá th·ªëng kh√¥ng b·ªã qu√° t·∫£i, d·∫ßn quen v·ªõi k√≠ch th√≠ch.</div>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-xl text-red-500 mr-3 mt-0.5">&#x2193;</span>
                                    <div><strong class="font-semibold">ƒê√†o th·∫£i C√¢n b·∫±ng:</strong> Qu√° tr√¨nh ƒë∆∞a h·ªá th·ªëng tr·ªü l·∫°i tr·∫°ng th√°i c√¢n b·∫±ng n·ªôi m√¥i ban ƒë·∫ßu.</div>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-medium text-slate-700 mb-2 text-base">M√¥ h√¨nh Nh·∫≠n th·ª©c</h4>
                            <ul class="space-y-3 text-sm text-slate-600">
                                <li class="flex items-start">
                                    <span class="text-base mr-3 mt-1">üéØ</span>
                                    <div><strong class="font-semibold">IAD‚ÇÄ (ƒê·ªô ch√™nh):</strong> Sinh ra t·ª´ s·ª± so s√°nh gi·ªØa "Th·ª±c t·∫°i" v√† "Gi√° tr·ªã" c·ªßa "C√°i T√¥i V·∫≠n H√†nh".</div>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-base mr-3 mt-1">üßò</span>
                                    <div><strong class="font-semibold">SP (Samatha):</strong> L√† nƒÉng l·ª±c ·ªïn ƒë·ªãnh "Ch√∫ √Ω" (Giai ƒëo·∫°n 3 c·ªßa V√≤ng L·∫∑p ƒê·ªông), gi√∫p n√©n bi√™n ƒë·ªô.</div>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-base mr-3 mt-1">üí°</span>
                                    <div><strong class="font-semibold">RM (VipassanƒÅ):</strong> L√† nƒÉng l·ª±c ƒëi·ªÅu h∆∞·ªõng "Ng√£ ba T∆∞ duy" (Giai ƒëo·∫°n 7), gi√∫p ƒë·ªãnh h√¨nh th·ªùi gian.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200/50">
                    <h3 class="font-semibold text-slate-800 mb-3">‚öïÔ∏è Ch√¢n dung L√¢m s√†ng & H∆∞·ªõng ƒëi Tr·ªã li·ªáu</h3>
                    <p class="text-sm text-slate-600 mb-4">M√¥ h√¨nh n√†y cho ph√©p ph√°c h·ªça "h·ªì s∆° ƒë·ªông h·ªçc c·∫£m x√∫c" cho c√°c r·ªëi lo·∫°n kh√°c nhau v√† g·ª£i √Ω c√°c can thi·ªáp ƒë∆∞·ª£c c√° nh√¢n h√≥a.</p>
                    <div class="space-y-6 pt-4 border-t border-slate-200/80">
                        
                        <div>
                            <h4 class="font-semibold text-slate-700">R·ªëi lo·∫°n Lo √¢u Lan t·ªèa</h4>
                            <p class="text-xs text-slate-500 mb-2">ƒê·∫∑c tr∆∞ng b·ªüi s·ª± nh·∫°y c·∫£m qu√° m·ª©c v√† kh·∫£ nƒÉng ƒëi·ªÅu h√≤a k√©m.</p>
                            <div class="flex flex-wrap gap-2 text-xs mb-3">
                                <span class="bg-rose-100 text-rose-800 font-mono px-2 py-0.5 rounded">AG ‚Üë</span>
                                <span class="bg-rose-100 text-rose-800 font-mono px-2 py-0.5 rounded">SP ‚Üì</span>
                                <span class="bg-rose-100 text-rose-800 font-mono px-2 py-0.5 rounded">Œ≥- cao</span>
                            </div>
                            <p class="text-sm text-slate-600"><strong class="font-semibold text-teal-700">H∆∞·ªõng can thi·ªáp:</strong> C√°c li·ªáu ph√°p t·∫≠p trung v√†o ƒëi·ªÅu h√≤a sinh l√Ω v√† ƒë·ªãnh t√¢m nh∆∞ thi·ªÅn Samatha, k·ªπ thu·∫≠t th·ªü, biofeedback.</p>
                        </div>

                        <div>
                            <h4 class="font-semibold text-slate-700">Tr·∫ßm c·∫£m (M·∫•t kho√°i c·∫£m)</h4>
                            <p class="text-xs text-slate-500 mb-2">Ni·ªÅm vui ch√≥ng t√†n v√† d·ªÖ b·ªã n·ªói bu·ªìn l·∫•n √°t.</p>
                            <div class="flex flex-wrap gap-2 text-xs mb-3">
                                <span class="bg-blue-100 text-blue-800 font-mono px-2 py-0.5 rounded">IAD‚ÇÄ‚Å∫ th·∫•p</span>
                                <span class="bg-blue-100 text-blue-800 font-mono px-2 py-0.5 rounded">Œ≥+ cao</span>
                                <span class="bg-blue-100 text-blue-800 font-mono px-2 py-0.5 rounded">Œ∫ cao (√Çm ‚Üí D∆∞∆°ng)</span>
                            </div>
                            <p class="text-sm text-slate-600"><strong class="font-semibold text-teal-700">H∆∞·ªõng can thi·ªáp:</strong> C√°c li·ªáu ph√°p h√†nh vi nh∆∞ K√≠ch ho·∫°t H√†nh vi (Behavioral Activation) ho·∫∑c c√°c b√†i t·∫≠p t·∫≠n h∆∞·ªüng (savoring).</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700">R·ªëi lo·∫°n Stress sau Sang ch·∫•n (PTSD)</h4>
                            <p class="text-xs text-slate-500 mb-2">K√Ω ·ª©c ti√™u c·ª±c dai d·∫≥ng v√† kh√≥ ki·ªÉm so√°t.</p>
                            <div class="flex flex-wrap gap-2 text-xs mb-3">
                                <span class="bg-amber-100 text-amber-800 font-mono px-2 py-0.5 rounded">AG ‚Üë</span>
                                <span class="bg-amber-100 text-amber-800 font-mono px-2 py-0.5 rounded">K‚Åª d√†i</span>
                                <span class="bg-amber-100 text-amber-800 font-mono px-2 py-0.5 rounded">RM ‚Üì</span>
                            </div>
                            <p class="text-sm text-slate-600"><strong class="font-semibold text-teal-700">H∆∞·ªõng can thi·ªáp:</strong> C√°c li·ªáu ph√°p nh·∫≠n th·ª©c nh∆∞ CBT, ACT ƒë·ªÉ r√®n luy·ªán k·ªπ nƒÉng t√°i th·∫©m ƒë·ªãnh v√† x·ª≠ l√Ω k√Ω ·ª©c.</p>
                        </div>

                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="bg-white mt-16 border-t">
        <div class="container mx-auto px-4 lg:px-8 py-6 text-center text-sm text-slate-500">
            <p>D·ª±a tr√™n b√†i vi·∫øt "Ph∆∞∆°ng Tr√¨nh H·∫°nh Ph√∫c T·ª©c Th·ªùi: M·ªôt M√¥ H√¨nh T√≠nh To√°n v·ªÅ ƒê·ªông h·ªçc C·∫£m x√∫c".</p>
            <p>M·ªôt c√¥ng c·ª• tr·ª±c quan h√≥a ƒë∆∞·ª£c t·∫°o ra ƒë·ªÉ kh√°m ph√° khoa h·ªçc nh·∫≠n th·ª©c.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const TIME_STEPS = 200;
            const MAX_TIME = 40;
            const timeLabels = Array.from({ length: TIME_STEPS }, (_, i) => (i * MAX_TIME) / TIME_STEPS);

            const iadSlider = document.getElementById('iad-slider');
            const agSlider = document.getElementById('ag-slider');
            const spSlider = document.getElementById('sp-slider');
            const rmSlider = document.getElementById('rm-slider');
            
            const iadValue = document.getElementById('iad-value');
            const agValue = document.getElementById('ag-value');
            const spValue = document.getElementById('sp-value');
            const rmValue = document.getElementById('rm-value');

            let singlePulseChart;

            function s_kernel(tau, K) {
                if (tau < 0) return 0;
                // K controls the duration. A negative sign on IAD0 makes RM < 1 shorten the pulse, and RM > 1 lengthen it.
                // For a positive IAD0, RM > 1 lengthens the pulse.
                const effectiveK = Math.sign(IAD0) > 0 ? K : 1/K;
                return (tau / (tau + effectiveK)) * Math.exp(-tau / effectiveK);
            }

            function calculateSinglePulse() {
                const IAD0 = parseFloat(iadSlider.value);
                const AG = parseFloat(agSlider.value);
                const SP = parseFloat(spSlider.value);
                const RM = parseFloat(rmSlider.value);
                const BETA = 0.5;

                iadValue.textContent = IAD0.toFixed(1);
                agValue.textContent = AG.toFixed(1);
                spValue.textContent = SP.toFixed(1);
                rmValue.textContent = RM.toFixed(1);
                
                // RM's effect is direction-dependent. For negative events, we want RM>1 to shorten the pulse.
                const K_val = Math.pow(RM, Math.sign(IAD0));
                
                const amplitude = IAD0 * AG * (1 / (1 + BETA * SP));

                return timeLabels.map(t => amplitude * s_kernel(t, K_val));
            }


            function updateSinglePulseChart() {
                const IAD0 = parseFloat(iadSlider.value);
                const AG = parseFloat(agSlider.value);
                const SP = parseFloat(spSlider.value);
                const RM = parseFloat(rmSlider.value);

                iadValue.textContent = IAD0.toFixed(1);
                agValue.textContent = AG.toFixed(1);
                spValue.textContent = SP.toFixed(1);
                rmValue.textContent = RM.toFixed(1);

                const K_val = Math.pow(RM, Math.sign(IAD0));
                const amplitude = IAD0 * AG * (1 / (1 + 0.5 * SP));

                const data = timeLabels.map(t => amplitude * s_kernel(t, K_val));

                singlePulseChart.data.datasets[0].data = data;
                singlePulseChart.data.datasets[0].borderColor = IAD0 >= 0 ? '#0d9488' : '#e11d48';
                singlePulseChart.data.datasets[0].backgroundColor = IAD0 >= 0 ? 'rgba(13, 148, 136, 0.1)' : 'rgba(225, 29, 72, 0.1)';
                singlePulseChart.update();
            }

            function createSinglePulseChart() {
                const ctx = document.getElementById('singlePulseChart').getContext('2d');
                singlePulseChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: timeLabels,
                        datasets: [{
                            label: 'H·∫°nh ph√∫c T·ª©c th·ªùi (Hn)',
                            data: [],
                            fill: true,
                            borderWidth: 2,
                            pointRadius: 0,
                            tension: 0.4,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                title: { display: true, text: 'Th·ªùi gian (t)' },
                                min: 0,
                                max: 10
                            },
                            y: {
                                title: { display: true, text: 'Tr·∫£i nghi·ªám C·∫£m x√∫c' },
                                min: -5,
                                max: 5
                            }
                        },
                        plugins: {
                            tooltip: {
                                mode: 'index',
                                intersect: false
                            },
                            legend: {
                                display: false
                            }
                        }
                    }
                });
                updateSinglePulseChart();
            }

            [iadSlider, agSlider, spSlider, rmSlider].forEach(slider => {
                slider.addEventListener('input', updateSinglePulseChart);
            });

            createSinglePulseChart();


            let totalExperienceChart;
            let events = [];
            const gammaPlusSlider = document.getElementById('gamma-plus-slider');
            const gammaMinusSlider = document.getElementById('gamma-minus-slider');
            const kappaSlider = document.getElementById('kappa-slider');
            const gammaPlusValue = document.getElementById('gamma-plus-value');
            const gammaMinusValue = document.getElementById('gamma-minus-value');
            const kappaValue = document.getElementById('kappa-value');
            
            function calculateTotalExperience() {
                const gamma_plus = parseFloat(gammaPlusSlider.value);
                const gamma_minus = parseFloat(gammaMinusSlider.value);
                const kappa = parseFloat(kappaSlider.value);
                
                gammaPlusValue.textContent = gamma_plus.toFixed(2);
                gammaMinusValue.textContent = gamma_minus.toFixed(2);
                kappaValue.textContent = kappa.toFixed(2);

                const trainedParams = {
                    AG: 1.0, 
                    SP: Math.max(0, parseFloat(spSlider.value)),
                    RM: Math.max(0.5, parseFloat(rmSlider.value))
                };
                const reactiveParams = { AG: 1.0, SP: 0, RM: 0.5 };

                function calculateMindResponse(params) {
                    let H_plus_sum = Array(TIME_STEPS).fill(0);
                    let H_minus_sum = Array(TIME_STEPS).fill(0);

                    events.forEach(event => {
                        const K = Math.pow(params.RM, Math.sign(event.IAD0));
                        const amplitude = event.IAD0 * params.AG * (1 / (1 + 0.5 * params.SP));
                        for (let i = 0; i < TIME_STEPS; i++) {
                            const t = timeLabels[i];
                            const pulse_val = amplitude * s_kernel(t - event.startTime, K);
                            if (pulse_val > 0) {
                                H_plus_sum[i] += pulse_val;
                            } else {
                                H_minus_sum[i] += -pulse_val;
                            }
                        }
                    });

                    let normalizedSum = Array(TIME_STEPS).fill(0);
                    for (let i = 0; i < TIME_STEPS; i++) {
                        const A_plus = H_plus_sum[i];
                        const A_minus = H_minus_sum[i];
                        
                        const denominator_plus = 1 + gamma_plus * A_plus + kappa * A_minus;
                        const denominator_minus = 1 + gamma_minus * A_minus + kappa * A_plus;

                        const normalized_plus = denominator_plus > 0 ? A_plus / denominator_plus : 0;
                        const normalized_minus = denominator_minus > 0 ? A_minus / denominator_minus : 0;
                        
                        normalizedSum[i] = normalized_plus - normalized_minus;
                    }
                    return normalizedSum;
                }
                
                const trainedMindData = calculateMindResponse(trainedParams);
                const reactiveMindData = calculateMindResponse(reactiveParams);
                
                return { trainedMindData, reactiveMindData };
            }

            function updateTotalExperienceChart() {
                const { trainedMindData, reactiveMindData } = calculateTotalExperience();
                totalExperienceChart.data.datasets[0].data = trainedMindData;
                totalExperienceChart.data.datasets[1].data = reactiveMindData;
                totalExperienceChart.update();
            }

            function createTotalExperienceChart() {
                const ctx = document.getElementById('totalExperienceChart').getContext('2d');
                totalExperienceChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: timeLabels,
                        datasets: [
                        {
                            label: 'T√¢m tr√≠ R√®n luy·ªán',
                            data: [],
                            borderColor: '#0d9488',
                            backgroundColor: 'rgba(13, 148, 136, 0.1)',
                            fill: true,
                            borderWidth: 2.5,
                            pointRadius: 0,
                            tension: 0.4
                        },
                        {
                            label: 'T√¢m tr√≠ Ph·∫£n ·ª©ng',
                            data: [],
                            borderColor: '#e11d48',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            tension: 0.4,
                        }]
                    },
                     options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                title: { display: true, text: 'Th·ªùi gian (t)' }
                            },
                            y: {
                                title: { display: true, text: 'Tr·∫£i nghi·ªám T·ªïng h·ª£p' },
                                min: -6,
                                max: 6
                            }
                        },
                        plugins: {
                           tooltip: {
                                mode: 'index',
                                intersect: false
                            },
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
                updateTotalExperienceChart();
            }
            
            createTotalExperienceChart();

            document.getElementById('add-positive-event').addEventListener('click', () => {
                events.push({
                    IAD0: 5 + Math.random() * 5, 
                    startTime: Math.random() * (MAX_TIME * 0.7)
                });
                updateTotalExperienceChart();
            });

            document.getElementById('add-negative-event').addEventListener('click', () => {
                 events.push({
                    IAD0: -5 - Math.random() * 5,
                    startTime: Math.random() * (MAX_TIME * 0.7)
                });
                updateTotalExperienceChart();
            });
            
            document.getElementById('reset-events').addEventListener('click', () => {
                events = [];
                updateTotalExperienceChart();
            });
            
            [gammaPlusSlider, gammaMinusSlider, kappaSlider].forEach(slider => {
                slider.addEventListener('input', updateTotalExperienceChart);
            });
            
            [agSlider, spSlider, rmSlider].forEach(slider => {
                slider.addEventListener('input', updateTotalExperienceChart)
            })

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

        });
    </script>
</body>
</html>

